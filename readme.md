# 학교 급식 챗봇
[http://pf.kakao.com/_Mxhxaxdxj](http://pf.kakao.com/_Mxhxaxdxj)

학생들의 편의성을 위해 학교 외의 장소에서도 급식에 대한 정보를 확인 할 수 있도록 하는 Python Flask로 제작된 웹 어플리케이션, 프로젝트입니다.

## 프로젝트 구성
```
├─ .venv
├─ src
│   ├─ data
│   │   │  mdata.*.json
│   │   │  mdata.json
│   │   └─ udata.json
│   │  back.py
│   │  front.py
│   └─ init.py
├─ static
│   └─ index.js
├─ templates
├─ test
│  .env
│  .gitignore
│  readme.md
│  reqiuirements.txt
│  run.py
└─ tailwind.config.js
```

```bash
$ python run.py
```

## 이용된 API
- NEIS API : 급식 정보 및 학교 정보 확인

## 기능들

|기능명|설명|발화|
|:---:|:---|:---|
|[학교 설정](#학교-설정)|정보를 받아올 학교를 설정합니다.|학교 설정, 학교 설정하기, 학교 선택 등|
|[급식 확인](#급식-확인)|학교의 급식 정보를 받아옵니다.|급식 확인, 급식 확인하기, 급식 알려줘 등|
|선호 급식 메뉴 설정|급식 중 선호하는 메뉴를 설정합니다.|선호 급식 메뉴 설정, 선호 메뉴 등록, 선호 급식 추가 등|
|베스트 메뉴 선택|급식 중 베스트 메뉴 하나를 선택합니다.|-|
|~~알러지 설정~~|알러지를 설정해 관련 메뉴를 표시합니다.|-|

<img src="static/img/1.png" height="500">

### 학교 설정
서비스를 처음 이용하는 경우 학교 설정 후 다양한 기능(해당 학교의 정보 확인 등)들을 이용할 수 있습니다.

1. 발화 입력
2. 설정된 학교 확인 후, 학교 설정울 할지 결정
3. 특정 학교의 이름을 입력 (예: ◯◯초, ◯◯◯고등학교)
4. 검색된 학교 중 해당 학교를 선택

<img src="static/img/2.png" height="500">

### 급식 확인
서비스의 메인 기능으로, 설정되어 있는 학교의 급식을 알려줍니다.

|타입|특정 피라미터|
|:---:|:---|
|[바로가기형](#바로가기형)|-|
|[일반형](#일반형)|오늘, 내일, 어제, 다음주 오늘, **월 **일 등|
|[케로셀형](#케로셀형)|이번주, 저번주, 다음주 등|
|[플러그인형](#플러그인형)|-|
|[자동형](#자동형)|-|

> 각 타입의 시작 기준으로 중복되는 여러 값을 갖고 있는 경우 우선도가 높은 타입으로 급식이 확인됩니다. (우선도는 아래 타입의 순서와 같습니다)  
> 또한, 특정 피라미터 기준에 맞지 않는 다른 값을 입력하는 경우 급식이 자동형으로 확인됩니다,  
> 예: "**11월 11일 다음주 급식을 알려 줘**"의 경우 급식이 일반형으로 확인됩니다.

#### 바로가기형
QuickReplies 버튼을 통해서 급식을 확인하는 경우, QuickRepies의 clientExtra의 데이터를 받아와 해당 값에 맞는 날짜의 급식을 알려줍니다.

#### 일반형
특정 피라미터에 맞는 어느 날짜의 급식 정보를 알려줍니다.

1. 특정 피라미터를 갖는 발화 입력
2. `@bot.date` 피라미터의 값을 받아와 해당 값에 맞는 날짜의 급식 확인

<img src="static/img/3.png" height="500">

#### 케로셀형
특정 피라미터를 갖는 어느 주의 급식 정보를 알려줍니다.

1. 특정 피라미터를 갖는 발화 입력
2. `@bot.date` 피라미터의 값을 받아와 해당 값에 맞는 날짜의 급식 확인

<img src="static/img/4.png" height="500">

#### 플러그인형
카카오톡의 플러그인 기능을 통해 날짜 값을 받아와 해당하는 급식 정보를 알려줍니다.

1. "특정 날짜의 급식" QuickReplies 버튼 이용
2. 카카오톡 플러그인 기능을 통해 날짜 값을 받아와 해당하는 급식 정보를 확인

<img src="static/img/5.png" height="500">

#### 자동형
아무런 타입으로 급식이 확인되지 않는 경우, 현재 시각이 20시가 넘는다면 내일의 급식 정보를 알려주고, 아니라면 오늘의 급식 정보를 알려줍니다.